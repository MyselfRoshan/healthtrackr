CREATE TABLE IF NOT EXISTS public."user"
(
  user_id SERIAL PRIMARY KEY,
	first_name VARCHAR (50) NOT NULL,
	last_name VARCHAR (50) NOT NULL,
	username VARCHAR (50) UNIQUE NOT NULL,
	password VARCHAR (255) NOT NULL,
	email VARCHAR(25) UNIQUE NOT NULL,
	created_on TIMESTAMP(0) DEFAULT CURRENT_TIMESTAMP,
	last_login TIMESTAMP(0),
	timezone VARCHAR (40)
	profile_pic VARCHAR(50),
  reset_token_hash VARCHAR (255),
  reset_token_expires_at TIMESTAMP(0),
)

CREATE TABLE daily_exercise (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date DATE NOT NULL,
  name VARCHAR(20) NOT NULL,
  target SMALLINT NOT NULL,
  performed SMALLINT NOT NULL,
  PRIMARY KEY (user_id, date)
);

CREATE TABLE stay_hydrated (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date DATE NOT NULL,
  target SMALLINT NOT NULL,
  intaked SMALLINT NOT NULL,
  PRIMARY KEY (user_id, date)
);

CREATE TABLE quality_sleep (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date DATE NOT NULL,
  bed_time TIME NOT NULL,
  wakeup_time TIME NOT NULL,
  sleep_duration TIME NOT NULL,
  PRIMARY KEY (user_id, date)
);
INSERT INTO quality_sleep (user_id, bed_time, wakeup_time, sleep_duration, date)
VALUES (1, '23:59', '07:00', '06:30', '2021-01-01');


UPDATE public.user SET reset_token_hash = NULL , reset_token_expires_at=null