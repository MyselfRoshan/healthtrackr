CREATE TABLE IF NOT EXISTS public."user"
(
  user_id SERIAL PRIMARY KEY,
	first_name VARCHAR (50) NOT NULL,
	last_name VARCHAR (50) NOT NULL,
	username VARCHAR (50) UNIQUE NOT NULL,
	password VARCHAR (255) NOT NULL,
	email VARCHAR(25) UNIQUE NOT NULL,
	created_on TIMESTAMP(0) DEFAULT CURRENT_TIMESTAMP,
	last_login TIMESTAMP(0),
	timezone VARCHAR (40)
	profile_pic VARCHAR(50),
  reset_token_hash VARCHAR (255),
  reset_token_expires_at TIMESTAMP(0),
)

CREATE TABLE daily_exercise (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date VARCHAR(10) NOT NULL,
  name VARCHAR(20) NOT NULL,
  target SMALLINT NOT NULL,
  actual SMALLINT NOT NULL,
  PRIMARY KEY (user_id, date)
);

CREATE TABLE stay_hydrated (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date VARCHAR(10) NOT NULL,
  target SMALLINT NOT NULL,
  intaked SMALLINT NOT NULL,
  PRIMARY KEY (user_id, date)
);

CREATE TABLE quality_sleep (
  user_id INTEGER NOT NULL REFERENCES public.user(user_id),
  date VARCHAR(10) NOT NULL,
  bed_time TIME NOT NULL,
  wakeup_time TIME NOT NULL,
  sleep_duration TIME NOT NULL,
  PRIMARY KEY (user_id, date)
);

CREATE TABLE email (
  id SERIAL PRIMARY KEY,
  subject VARCHAR(255) NOT NULL,
  status INTEGER NOT NULL,
  html_body TEXT,
  text_body TEXT,
  meta JSONB,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

UPDATE public.user SET reset_token_hash = NULL , reset_token_expires_at=null;